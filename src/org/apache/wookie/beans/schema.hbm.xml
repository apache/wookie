<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping
	package="org.apache.wookie.beans">

	<class name="Widget" table="Widget">
		<id name="id" column="id">
			<generator class="increment" />
		</id>
		<property name="widgetTitle" column="widget_title" type="string" />
		<property name="widgetShortName" column="widget_short_name" type="string" />
		<property name="widgetDescription" column="widget_description" type="string" />
		<property name="widgetAuthor" column="widget_author" type="string" />
		<property name="widgetAuthorEmail" column="widget_author_email" type="string" />
		<property name="widgetAuthorHref" column="widget_author_href" type="string" />
		<property name="url" column="url" type="string" />
		<property name="guid" column="guid" type="string" />
		<property name="height" column="height" />
		<property name="width" column="width" />
		<property name="maximize" type="true_false" />
		<set name="widgetTypes" inverse="true">
			<key column="widget_id" not-null="true" />
			<one-to-many class="WidgetType" />
		</set>
		<property name="version" column="widget_version" type="string" />
	</class>
	
	<class name="WidgetType" table="WidgetType">
		<id name="id" column="id">
			<generator class="increment" />
		</id>
		<many-to-one name="widget" class="Widget" column="widget_id" not-null="true" />
		<property name="widgetContext" column="widget_context" type="string" />
	</class>
	
	<class name="WidgetService" table="WidgetService">
		<id name="id" column="id">
			<generator class="increment" />
		</id>		
		<property name="serviceName" column="service_name" type="string" not-null="true"/>
	</class>


	<class name="WidgetDefault" table="WidgetDefault">
		<id name="widgetContext" type="string">
			<generator class="assigned" />
		</id>
		<property name="widgetId" />
	</class>

	<class name="ApiKey" table="ApiKey">
		<id name="id" column="id">
			<generator class="increment" />
		</id>
		<property name="value" column="value" type="string" />
		<property name="email" column="email" type="string" />
	</class>

	<class name="WidgetInstance" table="WidgetInstance">
		<id name="id" column="id">
			<generator class="increment" />
		</id>		
		<property name="userId" not-null="true"/>				
		<property name="sharedDataKey" not-null="true"/>				
		<property name="nonce"/>
		<property name="idKey" not-null="true"/>
		<property name="apiKey"/>
		<property name="opensocialToken" not-null="true" type="text" length="300"/>		
		<many-to-one name="widget" class="Widget" column="widget_id" not-null="true" />		
		<property name="updated" type="true_false" />
		<property name="shown" type="true_false" />
		<property name="hidden" type="true_false" />
		<property name="locked" type="true_false" />
	</class>
	
	<class name="WidgetIcon" table="WidgetIcon">
		<id name="id" column="id">
			<generator class="increment" />
		</id>		
		<property name="src" type="text" length="2048"/>				
		<property name="height"/>				
		<property name="width"/>	
		<many-to-one name="widget" class="Widget" column="widget_id" not-null="true" />		
	</class>
	
	<class name="License" table="License">
		<id name="id" column="id">
			<generator class="increment" />
		</id>		
		<property name="text" type="text" length="20480"/>	
		<property name="href" type="text" length="2048"/>				
		<property name="lang"/>				
		<property name="dir"/>	
		<many-to-one name="widget" class="Widget" column="widget_id" not-null="true" />		
	</class>

	<class name="SharedData" table="SharedData">
		<id name="id" column="id">
			<generator class="increment" />
		</id>		
		<property name="sharedDataKey" column="sharedDataKey" index="sharedDataIndex" />				
		<property name="dkey" />
		<property name="dvalue" type="text" length="2147483647"/>
		<property name="widgetGuid" column="widgetGuid"/>
	</class>
	
	<class name="Preference" table="Preference">
		<id name="id" column="id">
			<generator class="increment" />
		</id>
		<many-to-one name="widgetInstance" class="WidgetInstance" column="widget_instance_id" not-null="true" />
		<property name="dkey" />
		<property name="dvalue" type="text" length="2147483647"/>
		<property name="readOnly" type="true_false" />
	</class>

	<class name="Participant" table="Participant">
		<id name="id" column="id">
			<generator class="increment" />
		</id>
		<property name="widgetGuid" />
		<property name="sharedDataKey" />
		<property name="participant_id" />
		<property name="participant_display_name" />
		<property name="participant_thumbnail_url" />
	</class>
	
	<class name="PreferenceDefault" table="PreferenceDefault">
		<id name="id" column="id">
			<generator class="increment" />
		</id>
		<property name="preference"/>
		<property name="value"/>	
		<property name="readOnly" type="true_false" />
		<many-to-one name="widget" class="Widget" column="widget_id" not-null="true" />		
	</class>
		
	<class name="Whitelist" table="Whitelist">
		<id name="id" column="id">
			<generator class="increment" />
		</id>		
		<property name="fUrl" />		
	</class>
	
	<class name="Post" table="Post">
		<id name="id" column="id">
            <generator class="increment"/>
        </id>               
        <property name="userId" column="user_id"></property>        
        <property name="parentId" column="parent_id"></property>        
        <property name="content" column="content"></property>
        <property name="title" column="title"></property>
        <property name="publishDate" column="publish_date"></property>
        <property name="updateDate" column="update_date"></property>
        <property name="sharedDataKey" column="sharedDataKey" index="sharedDataKeyIndex" />             
     </class>  
     
     <class name="Feature" table="Feature">
		<id name="id" column="id">
			<generator class="increment" />
		</id>			
		<property name="featureName" column="featureName" />
		<property name="required" type="true_false" />
		<many-to-one name="widget" class="Widget" column="widget_id" not-null="true" />
		<set name="parameters" inverse="true">
			<key column="feature_id" not-null="true" />
			<one-to-many class="Param" />
		</set>	
	</class>		
	
	<class name="Param" table="Param">
		<id name="id" column="id">
			<generator class="increment" />
		</id>
		<many-to-one name="parentFeature" class="Feature" column="feature_id" not-null="true" />
		<property name="parameterName" column="parameterName" />	
		<property name="parameterValue" column="parameterValue" />
	</class>
	
	<class name="ServerFeature" table="ServerFeature">
		<id name="id" column="id">
			<generator class="increment" />
		</id>		
		<property name="className"/>
		<property name="featureName" />		
	</class>
	
	<class name="Token" table="Token">
		<id name="id" column="id">
			<generator class="increment" />
		</id>		
		<property name="requestUrl"/>
		<property name="accessUrl" />	
		<property name="authzUrl"/>
		<property name="requestToken" />
		<property name="accessToken"/>
		<property name="tokenSecret" />	
		<many-to-one name="widgetInstance" class="WidgetInstance" column="widget_instance_id" not-null="true" />		
	</class>	
	
	
		
</hibernate-mapping>

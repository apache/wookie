<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping
	package="org.tencompetence.widgetservice.beans">

	<class name="Widget" table="Widget">
		<id name="id" column="id">
			<generator class="native" />
		</id>
		<property name="widgetTitle" column="widget_title" type="string" />
		<property name="widgetDescription" column="widget_description" type="string" />
		<property name="version" column="widget_version" type="string" />
		<property name="widgetAuthor" column="widget_author" type="string" />
		<property name="widgetIconLocation" column="widget_icon_location" type="string" />
		<property name="url" column="url" type="string" />
		<property name="guid" column="guid" type="string" />
		<property name="height" column="height" />
		<property name="width" column="width" />
		<property name="maximize" type="true_false" />
		<set name="widgetTypes" inverse="true">
			<key column="widget_id" not-null="true" />
			<one-to-many class="WidgetType" />
		</set>
	</class>
	
	<class name="WidgetType" table="WidgetType">
		<id name="id" column="id">
			<generator class="native" />
		</id>
		<many-to-one name="widget" class="Widget" column="widget_id" not-null="true" />
		<property name="widgetContext" column="widget_context" type="string" />
	</class>
	
	<class name="WidgetService" table="WidgetService">
		<id name="id" column="id">
			<generator class="native" />
		</id>		
		<property name="serviceName" column="service_name" type="string" not-null="true"/>
	</class>


	<class name="WidgetDefault" table="WidgetDefault">
		<id name="widgetContext" type="string">
			<generator class="assigned" />
		</id>
		<property name="widgetId" />
	</class>

	<class name="ApiKey" table="ApiKey">
		<id name="id" column="id">
			<generator class="native" />
		</id>
		<property name="value" column="value" type="string" />
		<property name="email" column="email" type="string" />
	</class>

	<class name="WidgetInstance" table="WidgetInstance">
		<id name="id" column="id">
			<generator class="native" />
		</id>		
		<property name="userId" not-null="true"/>				
		<property name="sharedDataKey" not-null="true"/>				
		<property name="nonce"/>
		<property name="idKey" not-null="true"/>
		<property name="apiKey"/>
		<property name="opensocialToken" not-null="true"/>		
		<many-to-one name="widget" class="Widget" column="widget_id" not-null="true" />		
		<property name="updated" type="true_false" />
		<property name="shown" type="true_false" />
		<property name="hidden" type="true_false" />
		<property name="locked" type="true_false" />
	</class>

	<class name="SharedData" table="SharedData">
		<id name="id" column="id">
			<generator class="native" />
		</id>		
		<property name="sharedDataKey" column="sharedDataKey" index="sharedDataIndex" />				
		<property name="dkey" />
		<property name="dvalue" type="text" length="2147483647"/>
		<property name="widgetGuid" column="widgetGuid"/>
	</class>
	
	<class name="Preference" table="Preference">
		<id name="id" column="id">
			<generator class="native" />
		</id>
		<many-to-one name="widgetInstance" class="WidgetInstance" column="widget_instance_id" not-null="true" />
		<property name="dkey" />
		<property name="dvalue" type="text" length="2147483647"/>
	</class>
	
	<class name="PreferenceDefault" table="preferenceDefault">
		<id name="id" column="id">
			<generator class="native" />
		</id>
		<property name="preference"/>
		<property name="value"/>	
		<many-to-one name="widget" class="Widget" column="widget_id" not-null="true" />		
	</class>
		
	<class name="Whitelist" table="Whitelist">
		<id name="id" column="id">
			<generator class="native" />
		</id>		
		<property name="fUrl" />		
	</class>
	
	<class name="Post" table="Post">
		<id name="id" column="id">
            <generator class="native"/>
        </id>               
        <property name="userId" column="user_id"></property>        
        <property name="parentId" column="parent_id"></property>        
        <property name="content" column="content"></property>
        <property name="title" column="title"></property>
        <property name="publishDate" column="publish_date"></property>
        <property name="updateDate" column="update_date"></property>
        <property name="sharedDataKey" column="sharedDataKey" index="sharedDataKeyIndex" />             
     </class>  
		
</hibernate-mapping>
